---
date: "2022-07-31"
title: "tWIL 2022.07 4ì£¼ì°¨"
draft: false
summary: "This week I learned"
featured: /static/images/2022/06/tWIL.jpg
categories:
  - development
tags:
  - development
  - TypeScript
  - GraphQL
  - GraphQL-codegen
  - Prisma
  - Nexus GraphQL
  - Paljs
  - Reactjs
  - Nextjs
---

### TL;DR

ì´ë²ˆì£¼ëŠ” ì§€ë‚œì£¼ì— ì´ì–´ `@paljs/admin`ì„ ì‘ì—…í•˜ì˜€ë‹¤. ì¥ì ì´ ë„ˆë¬´ ë§ì•„ ë‹¨ì ì„ ìƒì‡„í•œ ê²ƒ ê°™ë‹¤.

ì²«ë²ˆì§¸ë¡œëŠ” `PrismaTable`ì´ë¼ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ê°€ì§„ ë§‰ê°•í•¨ ê·¸ë¦¬ê³  ì»¤ìŠ¤í„°ë§ˆì´ì§•ì˜ ì–´ë ¤ì›€ì´ ìˆì—ˆê³ , ì´ `PrismaTable`ì€ [Strapi.io](https://strapi.io/) ìˆ˜ì¤€ì€ ì•„ë‹ˆì§€ë§Œ í€„ë¦¬í‹° ë†’ì€ í…Œì´ë¸” ë¦¬ìŠ¤íŒ…, í˜ì´ì§€ë„¤ì´ì…˜, í•„í„° ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ì˜€ë‹¤. Relation í…Œì´ë¸”ë„ ë¦¬ìŠ¤íŒ…ì´ ë˜ë©°, ì—°ê²°ëœ í…Œì´ë¸”ê³¼ì˜ ì—°ë™ì„±ë„ ë§¤ìš° ì¢‹ì•˜ë‹¤.

![prisma-table](https://paljs.com/table.png)

ëª‡ê°€ì§€ ë‹¨ì ìœ¼ë¡œëŠ” `@paljs/ui`ì—ì„œ ì œê³µí•˜ëŠ” í…Œë§ˆ ì ìš©ì´ ì•ˆë˜ëŠ” ì ê³¼ Reactjsì—ì„œëŠ” ì¢€ ì†ì´ ë§ì´ê°€ëŠ” ë°˜ë©´ Nextjsì—ì„œëŠ” ì†ì‰½ê²Œ ì»´í¬ë„ŒíŠ¸ê°€ `pages`í´ë”ì— ì •ë¦¬ê°€ ëœë‹¤. ì´ ì»´í¬ë„ŒíŠ¸ë„ ë§ˆì°¬ê°€ì§€ë¡œ Generationëœ ì»´í¬ë„ŒíŠ¸ì´ê¸° ë•Œë¬¸ì— ê´€ë¦¬ì ì—ì„œ ì œì™¸ì‹œí‚¬ ìˆ˜ ìˆì–´ì„œ ì¢‹ê¸´ í•˜ì§€ë§Œ, ëª‡ ê°œì˜ í…Œì´ë¸” ì»´í¬ë„ŒíŠ¸ì˜ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì´í›„ì—ëŠ” ìˆ˜ì‘ì—…ì´ ë”°ë¼ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤. ê·¸ë¦¬ê³  í…Œì´ë¸” ì„¤ì •ì€ ë°±ì—”ë“œì˜ `adminSettings.json`ì´ë¼ëŠ” íŒŒì¼ë¡œ ê´€ë¦¬í•œë‹¤. ëª‡ê°œ ì•ˆë˜ëŠ” í…Œì´ë¸”ì—ì„œë„ ê½¤ ë§ì€ ì„¤ì •íŒŒì¼ì˜ ê¸¸ì´ë¥¼ ê°€ì§„ë‹¤. ë‹¹ì—° `Setting` ì»´í¬ë„ŒíŠ¸ë¡œ ì´ ì„¤ì •íŒŒì¼ì„ ê´€ë¦¬í•  ìˆ˜ ìˆì§€ë§Œ, ë°°í¬ì „ì— ë¡œì»¬ì—ì„œ ì„¤ì •í•˜ê³  ë²¡ì—”ë“œë¥¼ ë°°í¬í•´ì•¼í•˜ëŠ” ë‹¨ì ì´ ìˆë‹¤. ì´ê²ƒì€ ë‚˜ì¤‘ì— Documentë°©ì‹ì˜ DBë¡œ ê´€ë¦¬ê°€ ë˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.

## Paljs Prisma admin

Nextjsì™€ Gatsbyjsì˜ ì˜ˆì œëŠ” ì—¬ê¸°ì— ì˜ ë‚˜ì™€ìˆë‹¤. [paljs.com/prisma-admin](https://paljs.com/prisma-admin/) ë³„ë„ì˜ ë°±ì—”ë“œë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²½ìš° ì—¬ê¸° ë¬¸ì„œì˜ ì–´ë“œë¯¼ ë§Œë“¤ê¸°ì—ì„œ ì¡°ê¸ˆ ë³€í˜•ì„ í•´ì•¼í•œë‹¤.

### Backend

![paljs-workflow](/static/images/2022/07/paljs-workflow.svg)

í´ë”ë¥¼ ë§Œë“¤ê³ , í”„ë¡œì íŠ¸ ì…‹ì—…ì„ í•œë‹¤. ì—¬ê¸°ì„œëŠ” ë‚´ê°€ ë§Œë“¤ê³  ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” [TypeScript í”„ë¡œì íŠ¸ ìƒì„± ë³´ì¼ëŸ¬í”Œë ˆì´íŒ… CLI](https://github.com/eunchurn/packages/packages/1490281)ë¡œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œë‹¤. (`typescript`, `ts-node`, `ts-node-dev`, `jest`, `ts-jest`, `module-aliases`ë“±ì´ ì„¤ì¹˜ëœë‹¤.)

```sh
npm init -y
npx @eunchurn/init
```

```
â ‹ ğŸ installing TypeScript project...yarn add v1.22.19
info No lockfile found.
[1/4] Resolving packages...
[2/4] Fetching packages...
[3/4] Linking dependencies...
[4/4] Building fresh packages...
success Saved lockfile.
success Saved 275 new dependencies.
info Direct dependencies
â”œâ”€ @eunchurn/eslint-config@0.1.11
â”œâ”€ @eunchurn/prettier-config@0.0.4
â”œâ”€ ...omitted
â””â”€ yocto-queue@0.1.0
Done in 17.50s.
yarn add v1.22.19
[1/4] Resolving packages...
[2/4] Fetching packages...
[3/4] Linking dependencies...
[4/4] Building fresh packages...
success Saved lockfile.
success Saved 1 new dependency.
info Direct dependencies
â””â”€ module-alias@2.2.2
info All dependencies
â””â”€ module-alias@2.2.2
Done in 0.73s.
Created .gitignore file for flag type node.
Created a new tsconfig.json with:

  target: es2016
  module: commonjs
  outDir: dist
  strict: true
  baseUrl: .
  paths: undefined
  esModuleInterop: true
  skipLibCheck: true
  forceConsistentCasingInFileNames: true


You can learn more at https://aka.ms/tsconfig
Done in 0.72s.
.eslintrc.js 22ms
.prettierrc.js 2ms
jest.config.ts 180ms
package.json 4ms
src/__tests__/index.spec.ts 2ms
src/index.ts 1ms
src/moduleAliases.ts 2ms
tsconfig.json 9ms
âœ” ğŸ‰ TypeScript project setting done
```

ë‹¤ìŒê³¼ ê°™ì´ íŒŒì¼ë“¤ì´ ìƒì„±ëœë‹¤.

```
.
â”œâ”€â”€ jest.config.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ __tests__
â”‚   â”‚Â   â””â”€â”€ index.spec.ts
â”‚Â   â”œâ”€â”€ index.ts
â”‚Â   â””â”€â”€ moduleAliases.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ yarn.lock
```

ì´ì œ `express`, `graphql`, `apollo-server`, `nexus`, `prisma` ê·¸ë¦¬ê³  `paljs`ë¥¼ ì„¤ì¹˜í•œë‹¤.

```bash
yarn add express apollo-server-express graphql nexus @paljs/nexus @prisma/client nexus-shield
```

ê·¸ë¦¬ê³  devDependenciesë„ ì„¤ì¹˜í•œë‹¤.

```bash
yarn add -D @paljs/cli prisma
```

#### Prisma DB ì„¤ì •

`prisma` í´ë”ë¥¼ ë§Œë“¤ê³  `schema.prisma`íŒŒì¼ì„ ë§Œë“ ë‹¤. ê·¸ë¦¬ê³  ë¡œì»¬ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ `docker-compose.yml` íŒŒì¼ì„ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ë§Œë“ ë‹¤

```go:prisma/schema.prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider        = "prisma-client-js"
  binaryTargets   = ["native"]
  previewFeatures = ["metrics"]
}

/// ì‚¬ìš©ì
model User {
  id    String @id @default(cuid())
  name  String
  posts Post[]
}

/// í¬ìŠ¤íŠ¸
model Post {
  id       String  @id @default(cuid())
  title    String
  content  String
  author   User?   @relation(fields: [authorId], references: [id])
  authorId String?
}
```

```yml:docker-compose.yml
version: "3.1"
services:
  postgresqldb:
    image: postgres:13.7
    container_name: pajs-backend
    restart: always
    environment:
      POSTGRES_PASSWORD: password
      POSTGRES_USER: postgres
      PGDATA: /var/lib/postgresql/data/pgdata
    ports:
      - 5432:5432
    volumes:
      - dbdata:/var/lib/postgresql/data/pgdata
volumes:
  dbdata:
```

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— DB í™˜ê²½ë³€ìˆ˜ `.env`íŒŒì¼ì„ ì„¤ì •í•œë‹¤.

```env:.env
DATABASE_URL=postgresql://postgres:password@localhost:5432/apidb?schema=public&connection_limit=5
```

ì´ì œ DB ì»¨í…Œì´ë„ˆë¥¼ ë„ìš°ê³ (`docker-compose up -d`), `prisma db push`ë¥¼ í†µí•´ í”„ë¡œí† íƒ€ì… ë§ˆì´ê·¸ë ˆì´ì…˜ì„ í•œë‹¤.

```bash
yarn prisma db push
```

#### ì„œë²„ ì„¤ì •

`src/server.ts`ì™€ `src/context/index.ts`,`src/schema/index.ts` íŒŒì¼ì„ ìƒì„±í•œë‹¤.

```typescript:src/index.ts
import "./moduleAliases";
import "dotenv/config";
import { runServer } from "./server";

runServer();
```

```typescript:src/server.ts
import { ApolloServer } from "apollo-server-express";
import express from "express"
import { schema } from "./schema";
import { context } from "./context";

const port = process.env.PORT || "8000";

const app = express();
app.use(express.json());
app.disable("x-powered-by");

const server = new ApolloServer({
  schema,
  context,
  introspection: process.env.NODE_ENV !== "production",
  csrfPrevention: true,
  cache: "bounded",
});

export async function runServer() {
  await server.start();
  server.applyMiddleware({ app, path: "/" });
  await new Promise<void>((resolve) => app.listen(Number(port), resolve));
  logger.info(
    `ğŸš€ GraphQL service ready at http://localhost:${port}${server.graphqlPath}`,
  );
}
```

```typescript:src/schema/index.ts
import "../moduleAliases";
import {
  makeSchema,
  fieldAuthorizePlugin,
  declarativeWrappingPlugin,
} from "nexus";
import { SchemaConfig } from "nexus/dist/builder";
import { nexusShield, allow } from "nexus-shield";
import { ForbiddenError } from "apollo-server-core";
import * as types from "./types";
import { paljs } from "@paljs/nexus";
import path from "path";

const option: SchemaConfig = {
  types,
  shouldGenerateArtifacts: true,
  plugins: [
    nexusShield({
      defaultError: new ForbiddenError("Not allowed"),
      defaultRule: allow,
    }),
    paljs({
      includeAdmin: true,
    }),
    declarativeWrappingPlugin(),
    fieldAuthorizePlugin({
      formatError: ({ error }) => {
        console.log(error);
        return error;
      },
    }),
  ],
  sourceTypes: {
    modules: [
      {
        module: "@prisma/client",
        alias: "prisma",
      },
    ],
  },
  contextType: {
    module: require.resolve("../context"),
    export: "Context",
  },
  outputs: {
    typegen: path.resolve(__dirname, "../generated/resolverTypes.ts"),
    schema: path.resolve(__dirname, "../generated/schema.graphql"),
  },
};

export const schema = makeSchema(option);
```

```typescript:src/context/index.ts
import { ExpressContext } from "apollo-server-express";

export interface Context {
  select: any;
}

export async function context({ req, res }: ExpressContext): Promise<Context> {
  return { select: null };
}
```

ê·¸ë¦¬ê³  `src/schema/types`ë¼ëŠ” í´ë”ë¥¼ ë§Œë“¤ê³  ë¹„ì–´ìˆëŠ” `index.ts` íŒŒì¼ì„ ë§Œë“ ë‹¤.

```typescript:src/schema/types/index.ts
export {}
```

#### Pal.js ì„¤ì •

ìë™ìƒì„±ë  plain `nexus` CRUDë¥¼ ìœ„ì¹˜í•  ê³³ì„ ì •ì˜ í•œë‹¤. (ë‚˜ì¤‘ì— `schema`ì— ë‹´ì•„ì£¼ì–´ì•¼ í•œë‹¤.)

```javascript:pal.js
/* eslint-disable no-undef */
/**
 * @type {import('@paljs/types').Config}
 **/
module.exports = {
  backend: {
    generator: "nexus",
    output: "src/schema/types/generated",
  },
};
```

#### Generator

Generationí•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ `package.json`ì— ì¶”ê°€í•œë‹¤.

```json:package.json
{
  "scripts": {
    ...omitted
    "generate": "yarn generate:pal && yarn generate:prisma && yarn generate:schema",
    "generate:prisma": "prisma generate",
    "generate:schema": "dotenv -e .env -- ts-node --transpile-only src/schema/index.ts",
    "pregenerate:pal": "rimraf src/schema/types/generated",
    "generate:pal": "pal g",
    "postgenerate:pal": "prettier --write src/schema/types/generated --loglevel silent",
  }
}
```

- `generate:prisma`: Prisma íƒ€ì…ê³¼ í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•œë‹¤.
- `generate:pal`: Paljs nexus CRUD ì½”ë“œë¥¼ ìƒì„±í•œë‹¤.
- `generate:schema`: Nexus ìŠ¤í‚¤ë§ˆì™€ ë¦¬ì¡¸ë²„ ê·¸ë¦¬ê³  íƒ€ì…ì„ ìƒì„±í•œë‹¤.
- `generate`: ì´ 3ì¢…ì˜ ì œë„ˆë ˆì´í„°ë¥¼ ëª¨ë‘ ì‹¤í–‰ì‹œí‚¨ë‹¤.
- `pregenerate:pal`: Paljs nexus CRUDë¥¼ ì‚­ì œí•œë‹¤.
- `postgenerate:pal`: ìƒì„±ëœ Paljs nexus CRUD ì½”ë“œë¥¼ prettierë¡œ ìŠ¤íƒ€ì¼ fix í•œë‹¤.

Generate ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•´ ë³´ì...

```
yarn generate
```

ì•„ë˜ì™€ ê°™ì´ íŒŒì¼ë“¤ì´ ìƒì„±ëœë‹¤.

```sh {21-58}
.
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ jest.config.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ pal.js
â”œâ”€â”€ prisma
â”‚   â””â”€â”€ schema.prisma
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ __tests__
â”‚   â”‚   â””â”€â”€ index.spec.ts
â”‚   â”œâ”€â”€ context
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ generated
â”‚   â”‚   â”œâ”€â”€ resolverTypes.ts
â”‚   â”‚   â””â”€â”€ schema.graphql
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ moduleAliases.ts
â”‚   â”œâ”€â”€ schema
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ types
â”‚   â”‚       â”œâ”€â”€ generated
â”‚   â”‚       â”‚   â”œâ”€â”€ Post
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ mutations
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ createOne.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ deleteMany.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ deleteOne.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ updateMany.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ updateOne.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â””â”€â”€ upsertOne.ts
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ queries
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ aggregate.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ findCount.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ findFirst.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ findMany.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ findUnique.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ type.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ User
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ mutations
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ createOne.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ deleteMany.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ deleteOne.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ updateMany.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ updateOne.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â””â”€â”€ upsertOne.ts
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ queries
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ aggregate.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ findCount.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ findFirst.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ findMany.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ findUnique.ts
â”‚   â”‚       â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ type.ts
â”‚   â”‚       â”‚   â””â”€â”€ index.ts
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â””â”€â”€ server.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ yarn.lock
```

ì´ì œ ë§ˆì§€ë§‰ìœ¼ë¡œ `src/schema/types/generated`ì— ìƒì„±ëœ ì½”ë“œì˜ `index.ts`ë¥¼ `src/schema/types/index.ts`ì—ì„œ `export` í•´ì¤€ë‹¤.

```typescript
export * from "./generated";
```

#### ì„œë²„ ì‹¤í–‰

ì„œë²„ë¥¼ ì•„ë˜ì™€ ê°™ì€ ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‹¤í–‰í•˜ë©´

```json:package.json
{
  "scripts": {
    "dev": "ts-node-dev --respawn --exit-child --transpile-only src/index.ts"
  }
}
```

```
yarn dev
```

ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

> Error: `NEXUS__UNKNOWN__TYPE` was already defined and imported as a type, check the docs for extending types

ê·¸ë ‡ë‹¤. ì—¬ê¸°ë„ ë¹ ë¥¸ `prisma` ê°œë°œì— ë”°ë¼ê°€ê¸´ ì–´ë ¤ìš´ ëª¨ì–‘ì´ë‹¤. ì•½ í•œë‹¬ì „ Prisma ëŠ” ë²„ì „ 4ë¡œ ì—…ê·¸ë ˆì´ë“œê°€ ë˜ì—ˆê³ , ì—¬ê¸°ëŠ” ì•„ì§ ì‘ì—…ì¤‘ì´ë¼ê³  í•œë‹¤. [@paljs/nexus : NEXUS**UNKNOWN**TYPE was already defined when updating to prisma 4.0.0](https://github.com/paljs/prisma-tools/issues/273). Paljsë¥¼ ë§Œë“  [Ahmed Elywa](https://ahmedelywa.com)ëŠ” ì˜¬í•´ 4ì›”ë¶€í„° Prismaì—ì„œ ì¼í•œë‹¤ê³  í•œë‹¤. ì•„ë§ˆë„ ì´ ì˜¤í”ˆì†ŒìŠ¤ëŠ” Prisma ê³µì‹ í”ŒëŸ¬ê·¸ì¸ì´ë‚˜ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¡œ ì§„í–‰ë˜ì§€ ì•Šì„ê¹Œ ìƒê°í•´ë³¸ë‹¤.

ê·¸ë˜ì„œ ì¼ë‹¨ Prisma ë²„ì „ì€ 3.15.2ë¡œ ë‚´ë ¤ì£¼ì.

```
yarn add @prisma/client@3.15.2
```

```
yarn add -D prisma@3.15.2
```

```
yarn dev
```

```
ğŸš€ GraphQL service ready at http://localhost:8000/
```

ì„±ê³µ.

#### Apollo studio

10ê°œì˜ `Query`íƒ€ì…ê³¼ 12ê°œì˜ `Mutation`íƒ€ì…ì´ ë§Œë“¤ì–´ì§„ë‹¤. `InputType`ì€ 69ê°œ, `Object`íƒ€ì…ì€ 12ê°œ ë§Œë“¤ì–´ì§„ë‹¤. 1:N relationì„ ê°€ì§„ 2ê°œì˜ í…Œì´ë¸”ì— ì´ì •ë„ì˜ CRUDê°€ ìƒì„±ëœë‹¤.

ì—¬ê¸°ì„œ ì£¼ëª©í•´ì•¼í•  ë¶€ë¶„ì€ `Context`ì— ë‹´ê¸´ `select`ì´ë‹¤. ì•ì„  tWILì—ì„œ ì„¤ëª…í–ˆë“¯ì´ GraphQL ë¦¬ì¡¸ë²„ì˜ 4ë²ˆì§¸ ì¸ìëŠ” `info`ë¥¼ ê°€ì§€ê³  Prisma selectê°€ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ë‹¤. ë”°ë¼ì„œ ìš°ë¦¬ëŠ” í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ ëª¨ë“  `select`ì™€ `aggregate`ê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

ì´ì œ Backendê°€ í•  ì¼ì´ ì—†ì–´ì§€ëŠ” ê²ƒì¸ê°€...

Prismaë¡œ ìƒì„±í•œ í…Œì´ë¸”ì—ì„œ ì¡°ê¸ˆ ë” í•„ìš”í•œ í•„ë“œê°€ ìˆì„ ìˆ˜ ìˆë‹¤.

ì²«ë²ˆì§¸ ì‚¬ìš©ìì˜ ê°’ì„ ê°€ì ¸ì™€ë³´ì.

```graphql
query FindFirstUser {
  findFirstUser {
    posts {
      id
      title
      content
    }
    _count {
      posts
    }
  }
}
```

ì—¬ê¸°ì„œ postsë¥¼ ê°€ì ¸ì˜¤ë©´ì„œ aggregate ê²°ê³¼ë„ ê°€ì ¸ì˜¨ë‹¤. ë‹¹ì—°íˆ í•„í„°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

ì´ ì‚¬ìš©ìì˜ postì¤‘ ì œëª©ì— "hello"ê°€ ìˆëŠ” í¬ìŠ¤íŠ¸ë§Œ ê°€ì ¸ì˜¤ê¸°ë¡œ í•˜ë©´, `_count`ë„ í•„í„°ê°€ ë™ì‘í•˜ì—¬ ë™ì¼í•˜ê²Œ ì¹´ìš´íŠ¸í•œë‹¤.

```graphql
query FindFirstUser {
  findFirstUser {
    posts(where: { title: { contains: "hello " } }) {
      id
      title
      content
    }
    _count {
      posts
    }
  }
}
```

ê°€ì¥ ëŒ€ì¤‘ì ìœ¼ë¡œ ì“°ì´ëŠ” `_count`ì˜ ê²½ìš°ëŠ” ë”ì´ìƒ ì‘ì—…í•  í•„ìš”ê°€ ì—†ë‹¤. Pagination ê¹Œì§€ ë¬´ë¦¬ì—†ì´ CRUD ì–´ë“œë¯¼ì„ ë§Œë“œëŠ”ë° ì§€ì¥ì´ ì—†ë‹¤.

#### Extended Object type

ìë™ìœ¼ë¡œ ìƒì„±ë˜ëŠ” CRUDëŠ” ê·¸ëŒ€ë¡œ ë‘ê³ , `Post`ì— ì™¸ë¶€ë¡œ ì—­ë§í¬ëœ ë‹¤ë¥¸ ë¸”ë¡œê·¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°›ì•„ì˜¤ê¸°(ê°€ì •) SDKê°€ ìˆë‹¤ê³  í•´ë³´ì. ì´ëŸ´ë•Œ `Post`ì— ìë™ìƒì„±ëœ CRUDë¥¼ ê±´ë“¤í•„ìš” ì—†ì´ `extendType`ìœ¼ë¡œ íƒ€ì…ì„ í™•ì¥í•œë‹¤.

`findReferredBlogs()` í•¨ìˆ˜ëŠ” í˜„ì¬ ì—†ë‹¤. (ì–´ë”˜ê°€ì—ì„œ ì„œë¹„ìŠ¤í•˜ê³  ìˆë‹¤ë©´...) ë‹¹ì—°íˆ `id`ë¡œ ë¸”ë¡œê·¸ì˜ ë¦¬í¼ëŸ´ì„ ì°¾ì„ ìˆ˜ ìˆì§„ ì•Šê² ì§€ë§Œ ê·¸ëŸ°ê²Œ ê°€ëŠ¥í•˜ë„ë¡ ëˆ„êµ°ê°€ê°€ SDKë¡œ ì„œë¹„ìŠ¤í•œë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ íƒ€ì…ì„ extendí•  ìˆ˜ ìˆë‹¤.

```typescript
import { extendType } from "nexus";

export const referredBlog = extendType({
  type: "Post",
  definition(t) {
    t.list.string("referredBlogs", {
      async resolve({ id }) {
        const referredBlogsUrls = await findReferredBlogs(id);
        return referredBlogsUrls;
      },
    });
  },
});
```

ì´ë ‡ê²Œ íƒ€ì…ì— í•„ë“œê°€ ì¶”ê°€ëœë‹¤.

```graphql {7}
query FindFirstUser {
  findFirstUser {
    posts(where: { title: { contains: "hello" } }) {
      id
      title
      content
      referredBlogs
    }
    _count {
      posts
    }
  }
}
```

ì¦‰, í˜„ ë°±ì—”ë“œ APIì—ì„œ ì˜ì¡´í•˜ëŠ” DBê°€ ì•„ë‹ˆë”ë¼ë„ ì—¬ëŸ¬ APIì™€ ì—°ë™í•˜ì—¬ íƒ€ì…ì„ ì–¼ë§ˆë“ ì§€ extend í•  ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ í™•ì¥ê°€ëŠ¥í•œ APIëŠ” ìš°ë¦¬ì—ê²Œ ë§ì€ ììœ ë¥¼ ì¤€ë‹¤.

### Admin schema setting

[Add graphql queries and mutation](https://paljs.com/prisma-admin/#add-graphql-queries-and-mutation)ì™€ ê°™ì€ ì„¤ì •ì´ í•„ìš”í•˜ë‹¤ ì´ì „ tWILì—ì„œë„ ì„¤ëª…í–ˆë“¯ì´ ë°±ì—”ë“œê°€ ë³„ë„ë¡œ ë™ì‘í•  ê²½ìš° ë²¡ì—”ë“œì—ì„œ `getSchema`ì˜ ì—”ë“œí¬ì¸íŠ¸ê°€ ìˆì–´ì•¼ í•œë‹¤. ì´ ë¶€ë¶„ì€ ê³ ë„í™” ì‘ì—…ì—ì„œ ì¤‘ìš”í•œ ì„¤ì •ì´ ë  ê²ƒ ê°™ë‹¤.

```javascript:pal.js
/* eslint-disable no-undef */
/**
 * @type {import('@paljs/types').Config}
 **/
module.exports = {
  backend: {
    generator: "nexus",
    output: "src/schema/types/generated",
  },
  frontend: {
    admin: true,
  },
};
```

ì™€ ê°™ì´ ì„¤ì •í•˜ê³  `yarn pal g`ë¥¼ ìˆ˜í–‰. ê·¸ë¦¬ê³  ìƒì„±ëœ `pages` í´ë”ëŠ” ì‚­ì œí•œë‹¤. ì´í›„ `getSchema`ê°€ ë…¸ì¶œë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ë‹¹ì—°íˆ `schema/index.ts`ì—ì„œ `includeAdmin: true`ê°€ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤.

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ìƒì„±ëœ `adminSettings.json`ì„ ê°€ì§€ê³  í”„ë¡ íŠ¸ ì–´ë“œë¯¼ì˜ ì„¤ì •ì„ í•´ì¤„ ìˆ˜ ìˆë‹¤.

## Frontend

ì´ì œ ì–´ë“œë¯¼ ì•±ì„ ë§Œë“¤ì–´ë³´ì. ì¼ë‹¨ Nextjsë¥¼ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•˜ê³ , ë‘ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì§„í–‰í•  ìˆ˜ ìˆë‹¤. `schema.prisma`ëŠ” ë°±ì—”ë“œì—ì„œ ê´€ë¦¬í•˜ê³  ìˆë‹¤. ì´ ìŠ¤í‚¤ë§ˆë¥¼ í”„ë¡ íŠ¸ì—ì„œ ê°€ì ¸ì˜¤ëŠ” ê²½ìš° ìŠ¤í‚¤ë§ˆ ë“œë¦¬í”„íŠ¸ê°€ ë°œìƒí•  ì—¬ì§€ê°€ ìˆë‹¤. ê·¸ë ‡ë‹¤ê³  ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œ ì‚¬ì´ ìŠ¤í‚¤ë§ˆ ê³µìœ ê°€ ê°€ëŠ¥í•´ì•¼í•˜ëŠ”ë° ì´ë¶€ë¶„ì€ ì°¨ì°¨ ê³ ë¯¼í•´ì•¼í•  ê²ƒ ê°™ë‹¤.

ì²«ë²ˆì§¸ ë°©ì‹ì€ ë°±ì—”ë“œì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•œ í›„ ì´ë¥¼ í”„ë¡ íŠ¸ì•±ìœ¼ë¡œ ë³µì‚¬í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, ë‘ë²ˆì§¸ ë°©ì‹ì€ `schema.prisma`ë¥¼ í”„ë¡ íŠ¸ í”„ë¡œì íŠ¸ì— ìœ„ì¹˜í•˜ê³  ì–´ë“œë¯¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ê²½ìš°ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œëŠ” `schema.prisma`ë¥¼ ì–´ë”˜ê°€ì—ì„œ ê°€ì§€ê³  ì˜¬ ìˆ˜ ìˆë‹¤ê³  ê°€ì •, í˜¹ì€ `introspection`ì´ ê°€ëŠ¥í•˜ë‹¤ê³  ê°€ì •í•˜ê³  ì˜ˆì œ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ë³¼ ì˜ˆì •ì´ë‹¤.

ë””ìì¸ ì‹œìŠ¤í…œì€ `@paljs/ui`ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤. ì´ ì–´ë“œë¯¼ì€ ì˜¤í”ˆì†ŒìŠ¤ë¡œ í…œí”Œë¦¿ì´ ê³µê°œë˜ì–´ ìˆë‹¤. [paljs/nextjs-admin-template](https://github.com/paljs/nextjs-admin-template) [Demo](https://nextjs-admin.paljs.com/) ì´ ë””ìì¸ ì‹œìŠ¤í…œì´ ë§˜ì— ë“¤ì§€ ì•ŠëŠ”ë‹¤ë©´ ì–¼ë§ˆë“ ì§€ ë‹¤ë¥¸ ë””ìì¸ ì‹œìŠ¤í…œì„ ì´ìš©í•´ë„ ê´œì°®ë‹¤.

### Nextjs

ì´ í…œí”Œë¦¿ì„ í´ë¡ í•œë‹¤.

```
git clone git@github.com:paljs/nextjs-admin-template.git paljs-frontend
```

ì»¤ìŠ¤í„°ë§ˆì´ì§•ì€ ì•Œì•„ì„œ ì§„í–‰í•˜ë„ë¡ í•œë‹¤.

- `@paljs/admin`ì€ ì•„í´ë¡œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤. ë”°ë¼ì„œ `@apollo/client`, `graphql`ì„ ì„¤ì¹˜í•´ì¤€ë‹¤.

```bash
yarn add @paljs/admin @apollo/client graphql
```

- `pal.js` ì…‹ì—…

```javascript:pal.js
/* eslint-disable no-undef */
// @ts-check

/**
 * @type {import('@paljs/types').Config}
 **/

module.exports = {
  frontend: {
    admin: true,
  },
};
```

- `pal.js` í´ë¼ì´ì–¸íŠ¸ë¥¼ ì„¤ì¹˜í•œë‹¤.

```
yarn add -D @paljs/cli
```

- ë°±ì—”ë“œì˜ `schema.prisma`ë¥¼ `prisma/schema.prisma`ë¡œ ë³µì‚¬í•œë‹¤.
- ì´ì œ `pages`ì— ìˆëŠ” `auth`ë¥¼ ì œì™¸í•œ ëª¨ë“  ì„œë¸Œ í´ë”ë“¤ì„ ì§€ì›Œì¤€ë‹¤. `pages/index.tsx`ì—ì„œ routerë¥¼ `/dashboard`ë¡œ ì„¤ì •í•œë‹¤.
- LNBë¥¼ ìˆ˜ì •í•œë‹¤. `Layouts/menuItem.ts`ë¥¼ ìˆ˜ì •í•˜ì—¬ Home Pageë¥¼ ì œì™¸í•œ ë„¤ë¹„ê²Œì´ì…˜ë“¤ì„ ëª¨ë‘ ì§€ì›Œì¤€ë‹¤.

### Admin generate

```
yarn pal g
```

ì‹¤í–‰í•˜ë©´ `pages/admin/models`ì— ì–´ë“œë¯¼ í˜ì´ì§€ê°€ ë§Œë“¤ì–´ì§„ë‹¤. ë“¤ì–´ê°€ ë³´ë©´ ì¢€ ë‹¨ìˆœí•œë‹¤.

```typescript
import React from "react";
import PrismaTable from "components/PrismaTable";

const Post: React.FC = () => {
  return <PrismaTable model="Post" />;
};

export default Post;
```

`src/components`ì— `PrismaTable`ì´ ìˆë‹¤ëŠ” ê°€ì •í•˜ì— ì»´í¬ë„ŒíŠ¸ê°€ ìƒê²¨ë‚œë‹¤. ê·¸ë¦¬ê³  ì´ `PrismaTable`ì€ `model`ì— í•´ë‹¹ í…Œì´ë¸” ì´ë¦„ì„ ë‹¬ì•„ì£¼ë©´ ëì´ë‹¤.

`components/PrismaTable`ì„ ë§Œë“¤ì–´ë³´ì.

```typescript:src/components/PrismaTable.tsx
import React from "react";
import { useRouter } from "next/router";
import { PrismaTable } from "@paljs/admin/PrismaTable";
import Layout from "Layouts";

const Table: React.FC<{ model: string }> = ({ model }) => {
  const router = useRouter();
  return (
    <Layout title={model}>
      <PrismaTable
        model={model}
        push={router.push}
        query={router.query}
      />
    </Layout>
  );
};

export default Table;
```

ì´ì œ `pages/admin/model`ì— ìˆëŠ” ë¼ìš°íŠ¸ë¥¼ ë„¤ë¹„ê²Œì´ì…˜(`Layouts/menuItem.ts`)ì— ì„¤ì •í•´ì£¼ë©´

```typescript:Layouts/menuItem.ts
import { MenuItemType } from "@paljs/ui/types";

const items: MenuItemType[] = [
  {
    title: "Home Page",
    icon: { name: "home" },
    link: { href: "/dashboard" },
  },
  {
    title: "Post",
    icon: { name: "archive" },
    link: { href: "/admin/model/Post" }
  },
  {
    title: "User",
    icon: { name: "person" },
    link: { href: "/admin/model/User" }
  }

];

export default items;
```

ì™„ë£Œ. ì‹¤í–‰í•˜ë©´ ì•„í´ë¡œ í´ë¼ì´ì–¸íŠ¸ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ë‚  ê²ƒì´ë‹¤. ì¼ë‹¨ ë·°ëŠ” ì™„ë£Œê°€ ë˜ì—ˆê³  ì•„í´ë¡œ í´ë¼ì´ì–¸íŠ¸ ì„¤ì •ì„ í•´ë³´ì.

### Apollo client in Nextjs

ê¸°ì¡´ React ì—ì„œ Apollo client ì„¤ì •ì€ ê°„ë‹¨í•˜ë‹¤. ë¸Œë¼ìš°ì €ë§Œ ì‹ ê²½ì“°ë©´ ë˜ê¸° ë•Œë¬¸ì¸ë°, Nextjsì˜ SSRì—ì„œëŠ” ë¸Œë¼ìš°ì €ê°€ ì•„ë‹Œ ì„œë²„ì—ë„ ë¡œë“œë¥¼ í•˜ê¸° ë•Œë¬¸ì— hookì„ ì‚¬ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ë¥¼ ë§Œë“¤ë„ë¡ í•œë‹¤.

`src/contexts/ApolloProvider`í´ë”ë¥¼ ë§Œë“ ë‹¤. ê·¸ë¦¬ê³  `useApolloClient.ts`ì— ë‹¤ìŒê³¼ ê°™ì´ ì•„í´ë¡œ í´ë¼ì´ì–¸íŠ¸ë¥¼ initialize í•œë‹¤.

```typescript:useApolloClient.ts
import React from "react";
import { ApolloClient, InMemoryCache, createHttpLink } from "@apollo/client"

const uri = "http://localhost:8000";

const createApolloClient = () => {
  const httpLink = createHttpLink({
    uri,
  });
  return new ApolloClient({
    cache: new InMemoryCache(),
    link: httpLink,
    ssrMode: typeof window === "undefined",
  });
};

let apolloClient: any;

export function initializeApollo(
  initialState = null,
) {
  const _apolloClient = apolloClient ?? createApolloClient();

  // If your page has Next.js data fetching methods that use Apollo Client, the initial state
  // gets hydrated here
  if (initialState) {
    _apolloClient.cache.restore(initialState);
  }
  // For SSG and SSR always create a new Apollo Client
  if (typeof window === "undefined") return _apolloClient;
  // Create the Apollo Client once in the client
  if (!apolloClient) apolloClient = _apolloClient;

  return _apolloClient;
}

export const useApolloClient = (
  initialState: any,
) => {
  return React.useMemo(
    () => initializeApollo(initialState),
    [initialState],
  );
};
```

ê·¸ë¦¬ê³  `pages/_app.tsx`ì— Providerë¥¼ ì„¤ì •í•œë‹¤.

```typescript:pages/_app.tsx
import { ApolloProvider } from "@apollo/client";
import { useApolloClient } from "contexts";
import { AppProps } from "next/app";

function App({
  Component,
  pageProps,
}: AppProps) {
  const client = useApolloClient(pageProps.initialApolloState);
  return (
    <ApolloProvider client={client}>
      <Component {...pageProps} />
    </ApolloProvider>
  )
}
```

ì„¤ì • ì™„ë£Œ.

ì‹¤í–‰í•´ë³´ì.

```bash
yarn dev
```

![prisma-admin](/static/images/2022/07/prisma-admin.png)

ì•„ì§ ë°ì´í„°ê°€ ì—†ì–´ì„œ ë³´ì—¬ì§€ëŠ” ê²ƒì´ ë§ì´ ì—†ë‹¤. ë°ì´í„°ë¥¼ ì¶”ê°€í•´ë³´ê³  ì–´ë“œë¯¼ì„ ì‚¬ìš©í•´ë³´ë©´ ì–´ë–¤ ëŠë‚Œì¸ì§€ íŒŒì•…ì´ ë ê±°ë¼ ìƒê°í•œë‹¤. ë‹¨ìˆœí•œ ì–´ë“œë¯¼ì´ê¸°ë„ í•˜ì§€ë§Œ ìˆì„ ê²ƒì€ ë‹¤ ìˆì–´ì„œ ë°ì´í„° ê´€ë¦¬ íŠ¹íˆ CMSê´€ì ì—ì„œëŠ” ê½¤ ì¢‹ë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ì„¤ì •í˜ì´ì§€ë¥¼ ì¶”ê°€í•´ë³¸ë‹¤.

`pages/admin/index.tsx`ì— ì¶”ê°€í•˜ì. ì—¬ê¸°ëŠ” generatorê°€ ì§€ìš°ì§€ ì•Šê¸° ë•Œë¬¸ì— `index.tsx`ì •ë„ëŠ” ë§Œë“¤ì–´ë‘ì–´ë„ ë‚˜ì˜ì§€ ì•Šì€ ê²ƒ ê°™ë‹¤.

```typescript:pages/admin/index.tsx
import React from 'react';
import { Settings } from '@paljs/admin/Settings';
import Layout from 'Layouts';

const languateKr = {
  dir: 'ê²½ë¡œ',
  header: 'ëª¨ë¸ Tables ìˆ˜ì •',
  dbName: 'DBì´ë¦„',
  displayName: 'í‘œì‹œì´ë¦„',
  modelName: 'ëª¨ë¸ ì´ë¦„',
  idField: 'ID í•„ë“œ',
  displayFields: 'í‘œì‹œ í•„ë“œ',
  // fieldName: string;
  // actions: string;
  // create: string;
  // update: string;
  // delete: string;
  // read: string;
  // filter: string;
  // sort: string;
  // editor: string;
  // upload: string;
  // tableView: string;
  // inputType: string;
};
export default function SettingsPage() {
  return (
    <Layout title="ì„¤ì •">
      <Settings language={languateKr} />
    </Layout>
  );
}
```

ë³´ëŠ”ë°”ì™€ ê°™ì´ ë©”ë‰´ í•œê¸€ì„¤ì •ë„ ììœ ë¡­ê²Œ í•  ìˆ˜ ìˆë‹¤.

ê·¸ë¦¬ê³  `menuItem`ì—ë„ ì´ ì„¤ì • í˜ì´ì§€ë¥¼ LNBì— ë„£ì–´ì£¼ì.

```typescript:Layouts/menuItem.ts
import { MenuItemType } from "@paljs/ui/types";

const items: MenuItemType[] = [
  {
    title: "Home Page",
    icon: { name: "home" },
    link: { href: "/dashboard" },
  },
  {
    title: "Post",
    icon: { name: "archive" },
    link: { href: "/admin/model/Post" }
  },
  {
    title: "User",
    icon: { name: "person" },
    link: { href: "/admin/model/User" }
  },
    {
    title: "Settings",
    icon: { name: "settings" },
    link: { href: "/admin" }
  }
];

export default items;
```

![prisma-admin-settings](/static/images/2022/07/prisma-admin-settings.png)

ì´ì œ í…Œì´ë¸”ì´ë‚˜ í•„ë“œ ìˆœì„œ ê·¸ë¦¬ê³  í‘œì‹œì´ë¦„ Relation í•„ë“œ í‘œì‹œì´ë¦„ê¹Œì§€ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë‹¤. ìˆ˜ì •í•˜ë©´ ë°±ì—”ë“œì˜ `adminSettings.json`íŒŒì¼ì´ ìˆ˜ì •ëœë‹¤.

## Wrapping up

ì´ ì˜ˆì œëŠ” githubì— ì˜¬ë ¤ë‘”ë‹¤.

- backend: [https://github.com/eunchurn/paljs-backend](https://github.com/eunchurn/paljs-backend)
- frontend: [https://github.com/eunchurn/paljs-frontend](https://github.com/eunchurn/paljs-frontend)

ë§Œì•½ í’€ìŠ¤íƒìœ¼ë¡œ ê°œë°œì„ í•œë‹¤ê±°ë‚˜ ë°±ì—”ë“œë§Œ ë§Œë“¤ê¸°ë¥¼ ì›í•˜ë©´, ì´ëŸ° ìŠ¤í¬ë˜ì¹˜ì—… ê³¼ì •ì—†ì´ `npx @paljs/cli create` from [CLI](https://paljs.com/cli/create)ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. `full-stack-nextjs`, `full-stack-gatbyjs`ì˜ ì˜µì…˜ì´ ìˆê³ , ë°±ì—”ë“œ ì‘ì—…ë§Œí•  ê²½ìš° `apollo-nexus-schema`, `apollo-sdl-first`, `graphql-modules`ì˜ ì˜µì…˜ì´ ìˆë‹¤. í”„ë¡ íŠ¸ëŠ” `Material UI`, `Material UI + PrismaAdmin UI`, `Tailwind CSS`, `Tailwind CSS + PrismaAdmin UI`, `Chakra UI`, `Chakra UI + PrismaAdmin UI` ì˜µì…˜ìœ¼ë¡œ í”„ë¡œì íŠ¸ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

ì¶”í›„ ê³ ë„í™” ì‘ì—…ì—ì„œëŠ” ì´ê±¸ ëª¨ë‘ ì“¸ ìˆ˜ ìˆì„ê¹Œ ê±±ì •ì´ê¸´ í•˜ë‹¤. í•˜ì§€ë§Œ ë°±ì—”ë“œì˜ CRUDëŠ” ê³„ì† ì“¸ ê²ƒ ê°™ê³ (Prisma 4ë§Œ ì§€ì›í•´ì¤€ë‹¤ë©´), í”„ë¡ íŠ¸ ì–´ë“œë¯¼ì€ `PrismaTable`ì˜ ììœ ë„ê°€ ì¢€ ë¶€ì¡±í•˜ë‹¨ ëŠë‚Œì´ë‹¤. ì–´ëŠ ë””ìì¸ ì‹œìŠ¤í…œì—ì„œë‚˜ ì˜ ë¶™ë„ë¡ Headless ì»´í¬ë„ŒíŠ¸ë¡œ ì œê³µë˜ì—ˆë‹¤ë©´ í›¨ì”¬ ì¢‹ì•˜ì„ ê±°ë€ ìƒê°ì´ ë“ ë‹¤. ë§Œì•½ í•„ìš”í•˜ë‹¤ë©´ ì´ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ìˆ˜ì •í•œ í›„ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•  í•„ìš”ëŠ” ìˆì„ ê²ƒ ê°™ë‹¤.

ì–´ì°Œ ë˜ì—ˆë“ , ì–´ë“œë¯¼ì— í˜ì„ ìŸì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì ì—ì„œ ê·¸ë¦¬ê³  ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©í•˜ê¸°ë¡œëŠ” ë‚˜ì˜ì§€ ì•Šë‹¤. ê¸°íš ìš´ì˜ì—ì„œ ìš”ì²­ì´ ì˜¤ë©´ `PrismaTable` ë°‘ì— í•„ìš”í•œ ìš”ì²­ì‚¬í•­ì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ê°€í•´ì£¼ë©´ ë˜ê¸° ë•Œë¬¸ì´ë‹¤.(`graphql-codegen`ì€ ì´ë•Œ ì‚¬ìš©í•˜ë©´ ì¢‹ë‹¤) ìš´ì˜ìš©ë„ë¡œ ì‚¬ìš©í•˜ëŠ” ì–´ë“œë¯¼ì— UXë¥¼ ê³ ë ¤í•˜ëŠ” ê²ƒê³¼ ê°™ì€ ì†Œëª¨ì ì¸ ì¼ì´ ìˆì„ê¹Œ.

ì–´ì°Œë˜ì—ˆë“  ì•½ê°„ì˜ ì–´ë“œë¯¼ ê³ ë„í™” ì‘ì—…ì„ í•˜ë©´ì„œ ê²ªì€ SSRì—ì„œì˜ ë Œë”ë§ ë¬¸ì œê°€ ì¢€ ìˆì—ˆëŠ”ë° ì´ëŠ” ë‹¤ìŒ ì£¼ì— ì •ë¦¬í•  í•„ìš”ê°€ ìˆë‹¤.
